
services:
  web:
    container_name: sanath-website # Keeping your container name

    build:
      context: . 
      dockerfile_inline: |
        FROM nginx:stable-alpine

        # Remove the default Nginx config
        RUN rm /etc/nginx/conf.d/default.conf

        # COPY the custom config that explicitly binds Nginx to 0.0.0.0:80
        COPY ./nginx/default.conf /etc/nginx/conf.d/default.conf

        # Copy your local website files
        COPY . /usr/share/nginx/html

        EXPOSE 80

    # Map Mac host port 8080 to container port 80
    ports:
      - "8080:80" 

    restart: always

    # Mount the volumes for live development (optional, but keep it)
    volumes:
      - .:/usr/share/nginx/html:ro